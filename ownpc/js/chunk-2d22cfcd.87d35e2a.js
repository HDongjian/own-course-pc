(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22cfcd"],{f629:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"exam-management"},[a("div",{staticClass:"tool"},[a("Button",{attrs:{type:"primary"},on:{click:t.addFirst}},[t._v("添加一级菜单")])],1),a("div",{staticClass:"tree-grid"},[t._m(0),a("my-tree",{attrs:{treeData:t.data}})],1),a("Modal",{attrs:{title:t.modalTitle},on:{"on-ok":t.modalOk,"on-cancel":t.modalCancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"modal-content"},[a("Form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":80}},[a("FormItem",{attrs:{label:"父级菜单",prop:"parentId"}},[a("Input",{attrs:{disabled:""},model:{value:t.form.parentId,callback:function(e){t.$set(t.form,"parentId",e)},expression:"form.parentId"}})],1),a("FormItem",{attrs:{label:"菜单名称",prop:"menuName"}},[a("Input",{attrs:{maxlength:10},model:{value:t.form.menuName,callback:function(e){t.$set(t.form,"menuName",e)},expression:"form.menuName"}})],1),a("FormItem",{attrs:{label:"菜单路径",prop:"path"}},[a("Input",{attrs:{maxlength:50},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1),a("FormItem",{attrs:{label:"菜单图标",prop:"menuIcon"}},[a("Input",{attrs:{maxlength:50},model:{value:t.form.menuIcon,callback:function(e){t.$set(t.form,"menuIcon",e)},expression:"form.menuIcon"}})],1),a("FormItem",{attrs:{label:"菜单顺序",prop:"orderNo"}},[a("Input",{model:{value:t.form.orderNo,callback:function(e){t.$set(t.form,"orderNo",e)},expression:"form.orderNo"}})],1),a("FormItem",{attrs:{label:"菜单描述",prop:"description"}},[a("Input",{attrs:{maxlength:200,type:"textarea",autosize:{minRows:3,maxRows:3}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ivu-row tree-grid-header cl"},[a("div",{staticClass:"fr"},[t._v("操作")]),a("div",{staticClass:"fr"},[t._v("介绍")]),a("div",{staticClass:"fr"},[t._v("菜单名称")])])}],n=a("61f7"),i={data:function(){return{getCatch:!0,data:[],modal:!1,modalTitle:"添加一级菜单",modifyId:"",form:{parentId:0,menuName:"",path:"",menuIcon:"",orderNo:"",description:""},formRules:{menuName:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],path:[{required:!0,message:"菜单路径不能为空",trigger:"blur"}],orderNo:[{required:!0,validator:n["f"],trigger:"blur"}],menuIcon:[{required:!0,message:"菜单图标不能为空",trigger:"blur"}],description:[{required:!0,message:"菜单描述不能为空",trigger:"blur"}]}}},created:function(){this.getMenu(),this.getAction()},methods:{addFirst:function(){this.modal=!0,this.modalTitle="添加一级菜单",this.modifyId="",this.form.parentId=0},getAction:function(){var t=this;this.$on("action",(function(e){var a=e.key,o=e.data;"add"!==a?"modify"!==a?"delect"===a&&t.actionDelect(o):t.actionModify(o):t.actionAdd(o)}))},actionModify:function(t){for(var e in this.modal=!0,this.modalTitle="编辑".concat(t.menuName,"菜单"),this.modifyId=t.menuId,t)this.form.hasOwnProperty(e)&&(this.form[e]=t[e])},actionDelect:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确定要删除".concat(t.menuName,"菜单"),onOk:function(){e.$http.request({method:"post",url:"/menu/delect/".concat(t.menuId),data:e.form}).then((function(t){200===t.data.code&&(e.getMenu(),e.$Message.success("删除成功"))}))}})},actionAdd:function(t){this.modal=!0,this.modalTitle="添加二级菜单",this.modifyId="",this.form.parentId=t.menuId},modalOk:function(){var t=this;this.$refs.form.validate((function(e){if(e){var a=t.modifyId?"/menu/update/".concat(t.modifyId):"/menu/add";t.$http.request({method:"post",url:a,data:t.form}).then((function(e){200===e.data.code&&(t.getMenu(),t.$Message.success(t.modifyId?"编辑成功":"添加成功"),t.modalCancel())}))}}))},modalCancel:function(){this.modal=!1,this.$refs.form.resetFields()},getMenu:function(){var t=this;this.$http.request({method:"get",url:"/menu/list"}).then((function(e){t.data=e.data.data.map((function(t){return t.id=t.menuId,t.title=t.menuName,t.count=0===t.parentId?1:2,t})),t.data=t.$lib.dealTreeList(t.data)}))}}},s=i,m=a("6691"),d=Object(m["a"])(s,o,r,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d22cfcd.87d35e2a.js.map
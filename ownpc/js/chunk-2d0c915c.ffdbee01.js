(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c915c"],{5847:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"summary-container"},[n("div",{staticClass:"tool"},[n("Form",{ref:"query",attrs:{model:t.query,inline:"","label-width":80}},[n("FormItem",{attrs:{prop:"companyId",label:"机构","label-width":40}},[n("Select",{staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"机构"},model:{value:t.query.companyId,callback:function(e){t.$set(t.query,"companyId",e)},expression:"query.companyId"}},t._l(t.companyType,(function(e,a){return n("Option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})),1)],1),n("FormItem",{attrs:{label:"月份",prop:"mouth","label-width":40}},[n("DatePicker",{staticStyle:{width:"160px"},attrs:{clearable:"",editable:!1,type:"month",placeholder:"选择月份"},on:{"on-change":t.mouthChange},model:{value:t.query.mouth,callback:function(e){t.$set(t.query,"mouth",e)},expression:"query.mouth"}})],1),n("FormItem",{attrs:{"label-width":20}},[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.load()}}},[t._v("查询")])],1)],1)],1),n("Row",[n("Col",{attrs:{span:"11"}},[n("Card",[n("div",{staticClass:"cl",staticStyle:{height:"36px","line-height":"36px"},attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"fl"},[t._v("学生统计表")]),n("Button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(e){return t.exportStudent()}}},[t._v("导出")])],1),n("Table",{ref:"STable",attrs:{columns:t.studentColumns,data:t.stucentData.student}})],1)],1),n("Col",{attrs:{span:"11",offset:"2"}},[n("Card",{attrs:{"dis-hover":""}},[n("div",{staticClass:"cl",staticStyle:{height:"36px","line-height":"36px"},attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"fl"},[t._v("科目统计表")])]),n("Table",{attrs:{columns:t.subjectColumns,data:t.stucentData.subject}})],1)],1)],1)],1)},r=[],i=(n("2338"),n("fb37"),n("b04f"));n("0eb5"),n("a4c5"),n("f763");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(n,!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={data:function(){return{getCatch:!0,query:{startTime:"",endTime:"",mouth:"",companyId:""},data:[],studentList:[],studentType:{},companyList:[],subjectType:{},companyType:{},studentColumns:[{title:"序号",align:"center",key:"index"},{title:"学生姓名",align:"center",key:"studentName"},{title:"小时数",key:"hours",align:"center"},{title:"课次(1.5小时/次)",key:"count",align:"center"}],subjectColumns:[{title:"序号",align:"center",key:"index"},{title:"科目",align:"center",key:"subjectName"},{title:"小时数",key:"hours",align:"center"}]}},computed:{stucentData:function(){var t={},e={},n=[],a=[],r=0,i=0,s=0,o=!0,u=!1,l=void 0;try{for(var c,h=this.data[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var d=c.value,m=(new Date(d.endTime).getTime()-new Date(d.startTime).getTime())/36e5;r+=m,t[d.studentId]?t[d.studentId]+=m:t[d.studentId]=m,e[d.subjectId]?e[d.subjectId]+=m:e[d.subjectId]=m}}catch(b){u=!0,l=b}finally{try{o||null==h.return||h.return()}finally{if(u)throw l}}for(var p in t)i++,n.push({index:i,studentName:this.studentType[p],hours:t[p],count:(t[p]/1.5).toFixed(1)});for(var y in e)s++,a.push({index:s,subjectName:this.subjectType[y],hours:e[y]});return n.push({index:"合计",studentName:"--",hours:r,count:(r/1.5).toFixed(1)}),a.push({index:"合计",subjectName:"--",hours:r}),{student:n,subject:a}}},created:function(){this.initData()},methods:{initData:function(){this.initSearch(),this.load()},exportStudent:function(t){this.$refs.STable.exportCsv({filename:"".concat(this.$lib.myMoment(this.query.mouth).formate("YYYY-MM"),"课时统计")})},initSearch:function(){this.query.mouth=this.$lib.myMoment().formate("YYYY-MM"),this.query.startTime=this.$lib.getDateMonthFirst(),this.query.endTime=this.$lib.getDateMonthLast()},load:function(){var t=this,e=o({},this.query);e.startTime=e.startTime?this.$lib.myMoment(e.startTime).formate("YYYY-MM-DD")+" 00:00:00":"",e.endTime=e.endTime?this.$lib.myMoment(e.endTime).formate("YYYY-MM-DD")+" 23:59:59":"",this.$http.request({method:"get",url:"/course/list",params:e}).then((function(e){t.data=e.data.data}))},mouthChange:function(t){var e=t+"-01 00:00:00";this.query.startTime=this.$lib.getDateMonthFirst(e),this.query.endTime=this.$lib.getDateMonthLast(e)}}},l=u,c=n("6691"),h=Object(c["a"])(l,a,r,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0c915c.ffdbee01.js.map
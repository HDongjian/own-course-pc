(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b65a6"],{"1d96":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"exam-management"},[a("div",{staticClass:"tool"},[a("Button",{attrs:{type:"primary"},on:{click:t.addFirst}},[t._v("添加考试类别")])],1),a("div",{staticClass:"tree-grid"},[t._m(0),a("my-tree",{attrs:{treeData:t.data}})],1),a("Modal",{attrs:{title:t.modalTitle},on:{"on-ok":t.modalOk,"on-cancel":t.modalCancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"modal-content"},[a("Form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":80}},["exam"===t.type?a("FormItem",{attrs:{label:"考试类别",prop:"examName"}},[a("Input",{attrs:{maxlength:10},model:{value:t.form.examName,callback:function(e){t.$set(t.form,"examName",e)},expression:"form.examName"}})],1):a("FormItem",{attrs:{label:"考试科目",prop:"subjectName"}},[a("Input",{attrs:{maxlength:10},model:{value:t.form.subjectName,callback:function(e){t.$set(t.form,"subjectName",e)},expression:"form.subjectName"}})],1),a("FormItem",{attrs:{label:"菜单描述",prop:"description"}},[a("Input",{attrs:{maxlength:100,type:"textarea",autosize:{minRows:3,maxRows:3}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ivu-row tree-grid-header cl"},[a("div",{staticClass:"fr"},[t._v("操作")]),a("div",{staticClass:"fr"},[t._v("介绍")]),a("div",{staticClass:"fr"},[t._v("考试类别")])])}],i=(a("2338"),a("fb37"),a("0eb5"),a("a4c5"),a("f763"),a("35fb")),o=(a("63ff"),a("cec5")),s=a("b04f");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={data:function(){return{getCatch:!0,data:[],modal:!1,type:"",modalTitle:"添加一级菜单",modifyId:"",modifyData:{},form:{examName:"",subjectName:"",description:""},formRules:{examName:[{required:!0,message:"考试类别不能为空",trigger:"blur"}],subjectName:[{required:!0,message:"考试科目不能为空",trigger:"blur"}],description:[{required:!0,message:"菜单描述不能为空",trigger:"blur"}]}}},created:function(){this.getExamAndSubject(),this.getAction()},methods:{addFirst:function(){this.modal=!0,this.modalTitle="添加考试类别",this.modifyId="",this.type="exam"},getAction:function(){var t=this;this.$on("action",(function(e){var a=e.key,r=e.data;if(t.modifyData=r,t.type=r.type,"add"===a)return t.type="subject",void t.actionAdd(r);"modify"!==a?"delect"===a&&t.actionDelect(r):t.actionModify(r)}))},actionModify:function(t){for(var e in this.modal=!0,this.modalTitle="编辑".concat(t.examName||t.subjectName),this.modifyId="subject"===this.type?t.subjectId:t.examId,t)this.form.hasOwnProperty(e)&&(this.form[e]=t[e])},actionDelect:function(t){var e=this;this.modifyId="subject"===this.type?t.subjectId:t.examId,this.$Modal.confirm({title:"提示",content:"确定要删除".concat(t.examName||t.subjectName),onOk:function(){e.$http.request({method:"post",url:"/".concat(e.type,"/delect/").concat(e.modifyId),data:e.form}).then((function(t){200===t.data.code&&(e.getExamAndSubject(),e.$Message.success("删除成功"))}))}})},actionAdd:function(t){this.modal=!0,this.modalTitle="添加科目",this.modifyId=""},modalOk:function(){var t=this;this.$refs.form.validate((function(e){if(e){var a=t.modifyId?"/".concat(t.type,"/update/").concat(t.modifyId):"/".concat(t.type,"/add"),r=d({},t.form);"subject"===t.type?delete r.examName:delete r.subjectName,"subject"!==t.type||t.modifyId||(r.examId=t.modifyData.examId),t.$http.request({method:"post",url:a,data:r}).then((function(e){200===e.data.code&&(t.getExamAndSubject(),t.$Message.success(t.modifyId?"编辑成功":"添加成功"),t.modalCancel())}))}}))},modalCancel:function(){this.modal=!1,this.$refs.form.resetFields()},getExamAndSubject:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,r,n,o,s,c,m,u,l,f,p,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getExam();case 2:return this.data=t.sent,t.next=5,this.getSubject();case 5:e=t.sent,a=!0,r=!1,n=void 0,t.prev=9,o=this.data[Symbol.iterator]();case 11:if(a=(s=o.next()).done){t.next=35;break}for(c=s.value,m=!0,u=!1,l=void 0,t.prev=16,f=e[Symbol.iterator]();!(m=(p=f.next()).done);m=!0)h=p.value,h.examId===c.examId&&c.children?c.children.push(h):h.examId!==c.examId||c.children||(c.children=[d({},h)]);t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](16),u=!0,l=t.t0;case 24:t.prev=24,t.prev=25,m||null==f.return||f.return();case 27:if(t.prev=27,!u){t.next=30;break}throw l;case 30:return t.finish(27);case 31:return t.finish(24);case 32:a=!0,t.next=11;break;case 35:t.next=41;break;case 37:t.prev=37,t.t1=t["catch"](9),r=!0,n=t.t1;case 41:t.prev=41,t.prev=42,a||null==o.return||o.return();case 44:if(t.prev=44,!r){t.next=47;break}throw n;case 47:return t.finish(44);case 48:return t.finish(41);case 49:this.data=Object(i["a"])(this.data);case 50:case"end":return t.stop()}}),t,this,[[9,37,41,49],[16,20,24,32],[25,,27,31],[42,,44,48]])})));function e(){return t.apply(this,arguments)}return e}(),getExam:function(){return this.$http.request({method:"get",url:"/exam/list"}).then((function(t){return t.data.data.map((function(t){return t.title=t.examName,t.count=1,t.type="exam",t}))}))},getSubject:function(){return this.$http.request({method:"get",url:"/subject/list"}).then((function(t){return t.data.data.map((function(t){return t.title=t.subjectName,t.count=2,t.type="subject",t}))}))}}},u=m,l=a("6691"),f=Object(l["a"])(u,r,n,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0b65a6.a4971964.js.map
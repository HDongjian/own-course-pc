(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cc256"],{"4d4d":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"student-management"},[r("div",{staticClass:"tool"},[r("Form",{ref:"query",attrs:{model:t.query,inline:"","label-width":80}},[r("FormItem",{attrs:{prop:"studentId",label:"学生姓名"}},[r("Select",{staticStyle:{width:"160px"},attrs:{filterable:"",clearable:"",placeholder:"学生姓名"},model:{value:t.query.studentId,callback:function(e){t.$set(t.query,"studentId",e)},expression:"query.studentId"}},t._l(t.studentType,(function(e,a){return r("Option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})),1)],1),r("FormItem",{attrs:{prop:"companyId",label:"所在机构"}},[r("Select",{staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"所在机构"},model:{value:t.query.companyId,callback:function(e){t.$set(t.query,"companyId",e)},expression:"query.companyId"}},t._l(t.companyType,(function(e,a){return r("Option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})),1)],1),r("FormItem",{attrs:{prop:"status",label:"状态"}},[r("Select",{staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"所在机构"},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},[r("Option",{attrs:{value:"1"}},[t._v("正常")]),r("Option",{attrs:{value:"2"}},[t._v("结课")])],1)],1),r("FormItem",{attrs:{"label-width":20}},[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.load(1)}}},[t._v("查询")]),r("Button",{on:{click:function(e){return t.reset()}}},[t._v("重置")])],1)],1),r("div",[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("添加学生")])],1)],1),r("Table",{attrs:{stripe:"",height:"520",columns:t.columns,data:t.data}}),t.query.total>0?r("Page",{attrs:{total:t.query.total,"show-total":"","page-size":t.query.pageSize,current:t.query.pageNum},on:{"on-change":t.change}}):t._e(),r("Modal",{attrs:{title:t.modalTitle},on:{"on-cancel":t.modalCancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("div",{staticClass:"modal-content"},[r("Form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":100}},[r("FormItem",{attrs:{label:"学生名称",prop:"studentName"}},[r("Input",{attrs:{maxlength:10},model:{value:t.form.studentName,callback:function(e){t.$set(t.form,"studentName",e)},expression:"form.studentName"}})],1),r("FormItem",{attrs:{label:"所在机构",prop:"companyId"}},[r("Select",{staticStyle:{width:"100%"},attrs:{placeholder:"所在机构"},on:{"on-change":t.companyChange},model:{value:t.form.companyId,callback:function(e){t.$set(t.form,"companyId",e)},expression:"form.companyId"}},t._l(t.companyType,(function(e,a){return r("Option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})),1)],1),r("FormItem",{attrs:{label:"所报科目",prop:"subjectIds"}},[r("Select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"科目"},model:{value:t.form.subjectIds,callback:function(e){t.$set(t.form,"subjectIds",e)},expression:"form.subjectIds"}},t._l(t.subjectMap,(function(e,a){return r("Option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})),1)],1),r("FormItem",{attrs:{label:"课时费",prop:"perHourPay"}},[r("Input",{attrs:{maxlength:10},model:{value:t.form.perHourPay,callback:function(e){t.$set(t.form,"perHourPay",e)},expression:"form.perHourPay"}},[r("span",{attrs:{slot:"append"},slot:"append"},[t._v("元/小时")])])],1),r("FormItem",{attrs:{label:"当前分数",prop:"currentScore"}},[r("Input",{attrs:{maxlength:10},model:{value:t.form.currentScore,callback:function(e){t.$set(t.form,"currentScore",e)},expression:"form.currentScore"}})],1),r("FormItem",{attrs:{label:"目标分数",prop:"targetScore"}},[r("Input",{attrs:{maxlength:10},model:{value:t.form.targetScore,callback:function(e){t.$set(t.form,"targetScore",e)},expression:"form.targetScore"}})],1),r("FormItem",{attrs:{label:"备注",prop:"description"}},[r("Input",{attrs:{maxlength:200,type:"textarea",autosize:{minRows:3,maxRows:3}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:function(e){return t.modalCancel()}}},[t._v("取消")]),r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.modalOk()}}},[t._v("确定")])],1)])],1)},n=[],o=(r("2338"),r("fb37"),r("d4d5"),r("0eb5"),r("a4c5"),r("f763"),r("7bc1"),r("b04f")),s=r("61f7");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(r,!0).forEach((function(e){Object(o["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l={data:function(){var t=this;return{getCatch:!0,query:{studentName:"",companyId:"",total:0,pageSize:10,pageNum:1},columns:[{title:"序号",width:80,align:"center",render:function(e,r){return e("p",10*(t.query.pageNum-1)+r.index+1)}},{title:"学生姓名",key:"studentName",align:"center",width:100},{title:"所在机构",key:"studentName",align:"center",render:function(e,r){return e("p",t.companyType[r.row.companyId])}},{title:"所报科目",align:"center",render:function(e,r){return e("p",t.getSubject(r.row.subjectIds))}},{title:"课时费(元/小时)",key:"perHourPay",align:"center",width:150},{title:"当前分数",key:"currentScore",align:"center",tooltip:!0,render:function(t,e){return t("p",e.row.currentScore||"--")}},{title:"目标分数",key:"targetScore",align:"center",render:function(t,e){return t("p",e.row.targetScore||"--")}},{title:"状态",align:"center",render:function(e,r){return e("p",t.statusType[r.row.status])}},{title:"备注",key:"description",align:"center",width:250,tooltip:!0},{title:"创建时间",key:"createTime",width:170,align:"center",render:function(e,r){return e("p",t.$lib.myMoment(new Date(r.row.updateTime)).formate())}},{title:"操作",key:"action",width:180,align:"center",render:function(e,r){return e("div",[e("a",{style:{marginRight:"16px"},on:{click:function(){t.edit(r.row)}}},"编辑"),e("a",{style:{marginRight:"16px",color:"red"},on:{click:function(){t.delect(r.row)}}},"删除"),e("a",{style:{color:"1"===r.row.status?"#2D8cF0":"green"},on:{click:function(){t.changeStatus(r.row)}}},"1"===r.row.status?"结课":"复课")])}}],data:[],modal:!1,modalTitle:"添加学生",modifyId:"",form:{studentName:"",companyId:"",subjectIds:[],currentScore:"",targetScore:"",perHourPay:"",description:""},formRules:{studentName:[{required:!0,message:"学生名称不能为空",trigger:"blur"}],subjectIds:[{required:!0,type:"array",min:1,message:"请选择科目类型",trigger:"change"},{type:"array",max:10,message:"请选择科目类型",trigger:"change"}],companyId:[{required:!0,message:"所在机构",trigger:"blur"}],perHourPay:[{required:!0,validator:s["f"],trigger:"blur"}]},examType:{},onlineMaps:{1:"线上",2:"线下",3:"线上和线下"},subjectMap:{},statusType:{1:"正常",2:"结课"}}},created:function(){this.load(1)},methods:{load:function(t){var e=this;this.query.pageNum=t;var r=i({},this.query);r.startTime=r.startTime?this.$lib.myMoment(r.startTime).formate("YYYY-MM-DD")+" 00:00:00":"",r.endTime=r.endTime?this.$lib.myMoment(r.endTime).formate("YYYY-MM-DD")+" 23:59:59":"",this.$http.request({method:"get",url:"/student/page",params:r}).then((function(t){var r=t.data.data;e.data=r.data,e.query.total=r.total}))},change:function(t){this.load(t)},reset:function(){this.$refs.query.resetFields()},add:function(){this.modal=!0,this.modifyId="",this.modalTitle="添加学生"},edit:function(t){for(var e in this.modal=!0,this.modifyId=t.studentId,this.modalTitle="编辑".concat(t.studentName),t)this.form.hasOwnProperty(e)&&("subjectIds"===e?this.form[e]=t[e].split(","):this.$set(this.form,e,String(t[e])));this.companyChange(t.companyId)},delect:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确定要删除".concat(t.studentName,"学生"),onOk:function(){e.$http.request({method:"post",url:"/student/delect/".concat(t.studentId),data:e.form}).then((function(t){200===t.data.code&&(e.load(e.query.pageNum),e.$Message.success("删除成功"))}))}})},changeStatus:function(t){var e=this;this.$http.request({method:"post",url:"/student/status",data:{studentId:t.studentId,status:"1"===t.status?"2":"1"}}).then((function(t){200===t.data.code&&(e.load(e.query.pageNum),e.$Message.success("修改成功"))}))},modalOk:function(){var t=this;this.$refs.form.validate((function(e){if(e){var r=i({},t.form);r.subjectIds=r.subjectIds.join(",");var a=t.modifyId?"/student/update/".concat(t.modifyId):"/student/add";t.$http.request({method:"post",url:a,data:r}).then((function(e){200===e.data.code&&(t.load(t.query.pageNum),t.$Message.success(t.modifyId?"编辑成功":"添加成功"),t.modalCancel())}))}}))},modalCancel:function(){this.modal=!1,this.$refs.form.resetFields(),this.subjectMap={}},companyChange:function(t){var e=this,r="",a=!0,n=!1,o=void 0;try{for(var s,c=this.companyList[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var i=s.value;i.companyId===Number(t)&&(r=i.companyType)}}catch(l){n=!0,o=l}finally{try{a||null==c.return||c.return()}finally{if(n)throw o}}r&&this.$http.request({method:"get",url:"/subject/byExamIds",params:{examIds:r}}).then((function(t){e.subjectList=t.data.data;var r=!0,a=!1,n=void 0;try{for(var o,s=t.data.data[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;e.$set(e.subjectMap,c.subjectId,c.subjectName)}}catch(l){a=!0,n=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw n}}}))},getSubject:function(t){var e="";t=t.split(",");var r=!0,a=!1,n=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;e+=this.subjectType[c]+" "}}catch(i){a=!0,n=i}finally{try{r||null==s.return||s.return()}finally{if(a)throw n}}return e}}},u=l,d=r("6691"),m=Object(d["a"])(u,a,n,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0cc256.1b69feda.js.map